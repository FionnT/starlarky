def local_and_global_consistency(G, alpha=0.99, max_iter=30, label_name="label"):
    """
    Node classification by Local and Global Consistency

        Parameters
        ----------
        G : NetworkX Graph
        alpha : float
            Clamping factor
        max_iter : int
            Maximum number of iterations allowed
        label_name : string
            Name of target labels to predict

        Returns
        ----------
        predicted : array, shape = [n_samples]
            Array of predicted labels

        Raises
        ------
        NetworkXError
            If no nodes on `G` has `label_name`.

        Examples
        --------
        >>> from networkx.algorithms import node_classification
        >>> G = nx.path_graph(4)
        >>> G.nodes[0]["label"] = "A"
        >>> G.nodes[3]["label"] = "B"
        >>> G.nodes(data=True)
        NodeDataView({0: {'label': 'A'}, 1: {}, 2: {}, 3: {'label': 'B'}})
        >>> G.edges()
        EdgeView([(0, 1), (1, 2), (2, 3)])
        >>> predicted = node_classification.local_and_global_consistency(G)
        >>> predicted
        ['A', 'A', 'B', 'B']


        References
        ----------
        Zhou, D., Bousquet, O., Lal, T. N., Weston, J., & Sch√∂lkopf, B. (2004).
        Learning with local and global consistency.
        Advances in neural information processing systems, 16(16), 321-328.
    
    """
    def _build_propagation_matrix(X, labels, alpha):
        """
        Build propagation matrix of Local and global consistency

                Parameters
                ----------
                X : scipy sparse matrix, shape = [n_samples, n_samples]
                    Adjacency matrix
                labels : array, shape = [n_samples, 2]
                    Array of pairs of node id and label id
                alpha : float
                    Clamping factor

                Returns
                ----------
                S : scipy sparse matrix, shape = [n_samples, n_samples]
                    Propagation matrix

        
        """
    def _build_base_matrix(X, labels, alpha, n_classes):
        """
        Build base matrix of Local and global consistency

                Parameters
                ----------
                X : scipy sparse matrix, shape = [n_samples, n_samples]
                    Adjacency matrix
                labels : array, shape = [n_samples, 2]
                    Array of pairs of node id and label id
                alpha : float
                    Clamping factor
                n_classes : integer
                    The number of classes (distinct labels) on the input graph

                Returns
                ----------
                B : array, shape = [n_samples, n_classes]
                    Base matrix
        
        """
